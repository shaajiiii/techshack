<!DOCTYPE html>
<html lang="en">

<%- include('../partials/admin-head.ejs')%>

    <body>


        <!-- home page with USERS LIST -->

        <%- include('../partials/admin-navbar.ejs')%>
            <!-- NAV END -->
            <h1 style="color: white;margin: 2rem;">Order Details </h1>


            <link rel="stylesheet" href="/styles/productCardStyle.css">
            <script src="https://kit.fontawesome.com/6a3d932f86.js" crossorigin="anonymous"></script>
            <section>
                <div class="container py-5">
                    <div class="row d-flex justify-content-center my-4">
                        <div class="col-md-8">
                            <div class="card mb-4" style="background-color:#1E1E1E">
                                <div class="card-header py-3" style="border-bottom: solid 1px rgb(67, 67, 67);">
                                    <h5 class="mb-0"> Products </h5>

                                </div>

                                <div class="card-body" id="tile">





                                    <% products.forEach((element)=> { %>

                                        <!-- Single item -->
                                        <div class="row pb-3 ">
                                            <div class="col-lg-3 col-md-12 mb-4 mb-lg-0">
                                                <!-- Image -->
                                                <div class="bg-image hover-overlay hover-zoom ripple rounded"
                                                    data-mdb-ripple-color="light">
                                                    <img src="/product-images/<%=element.product[0]._id%>.png"
                                                        class="w-100" />

                                                </div>
                                                <!-- Image -->
                                            </div>

                                            <div class="col-lg-5 col-md-6 mb-4 my-auto  ">
                                                <!-- Data -->

                                                <p><strong>
                                                        <%=element.product[0].name%>
                                                    </strong>
                                                </p>





                                                <p>
                                                    <%=element.product[0].brand%>
                                                </p>





                                            </div>

                                            <div class="col-lg-4 col-md-6 mb-4 mb-lg-0 mt-5 ">
                                                <!-- Quantity -->

                                                <p class="text-start text-md-center " style="margin-bottom: 0;">
                                                    <small>Quantity: <%= element.quantity%> &nbsp;</small>
                                                </p>


                                                <!-- Quantity -->




                                                <!-- Price -->
                                                <p class="text-start text-md-center ">
                                                    <strong> ₹ <%=element.product[0].price%> / unit</strong>
                                                </p>
                                                <!-- Price -->
                                            </div>
                                        </div>
                                        <!-- Single item -->
                                        <hr>


                                        <% }) %>


                                            <!--                         
                            <div class="row">
                              <div class="col-lg-3 col-md-12 mb-4 mb-lg-0" style="margin-left: auto;">
                                <h5>Total:₹ <span>503496727</span> </h5>
                                </div>
                              </div> -->




                                </div>
                            </div>


                        </div>




                        <div class="col-md-4">
                            <div id="summaryBox" class="card mb-4" style="background-color:#1E1E1E;">
                                <div class="card-header py-3" style="border-bottom: solid 1px rgb(67, 67, 67);">
                                    <h5 class="mb-0">Details</h5>
                                </div>
                                <div class="card-body">
                                    <ul class="list-group list-group-flush">

                                        <li class="list-group-item d-flex justify-content-between align-items-center px-0"
                                            style="background-color:#1E1E1E;color: white;">
                                            Username
                                            <span>
                                                <%=orderDetails.deliveryDetails.username %>
                                            </span>
                                        </li>

                                        <li class="list-group-item d-flex justify-content-between align-items-center px-0"
                                            style="background-color:#1E1E1E;color: white;">
                                            Mobile
                                            <span>
                                                <%=orderDetails.deliveryDetails.mobile %>
                                            </span>
                                        </li>

                                        <li class="list-group-item d-flex justify-content-between align-items-center px-0"
                                            style="background-color:#1E1E1E;color: white;">
                                            Address
                                            <span>
                                                <%=orderDetails.deliveryDetails.address %>
                                            </span>
                                        </li>

                                        <li class="list-group-item d-flex justify-content-between align-items-center px-0"
                                            style="background-color:#1E1E1E;color: white;">
                                            Pin:
                                            <span>
                                                <%=orderDetails.deliveryDetails.pincode %>
                                            </span>
                                        </li>
                                        <li class="list-group-item d-flex justify-content-between align-items-center px-0"
                                            style="background-color:#1E1E1E;color: white;">
                                            Ordered on:
                                            <span> &nbsp;<%=orderDetails.date %> </span>
                                        </li>

                                        <li class="list-group-item d-flex justify-content-between align-items-center px-0"
                                            style="background-color:#1E1E1E;color: white;">
                                            Payment Method
                                            <span> &nbsp;<%=orderDetails.paymentMethod %> </span>
                                        </li>

                                        <li class="list-group-item d-flex justify-content-between align-items-center px-0"
                                            style="background-color:#1E1E1E;color: white;">
                                            Order status :
                                            <span> &nbsp;<%=orderDetails.status %> </span>
                                        </li>


                                        <li class="list-group-item d-flex justify-content-between align-items-center px-0"
                                            style="background-color:#1E1E1E;color: white;">
                                            Delivery date:
                                            <% if(orderDetails.deliverydate) {%>
                                                <span> &nbsp;<%=orderDetails.deliverydate %> </span>
                                                <% } else { %>
                                                    <span> &nbsp; Not proccessed yet </span>

                                                    <% } %>



                                        </li>







                                        <hr>

                                        <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3"
                                            style="background-color:#1E1E1E;color: white;">
                                            <div>
                                                <strong>Total amount</strong>

                                            </div>

                                            <span><strong> ₹ <%=orderDetails.totalAmt %> </strong></span>



                                        </li>
                                    </ul>

                                    <hr>


                                    <% if(!orderDetails.deliverydate) {%>

                                        <form action="/admin/set-delivery-date/<%=orderDetails._id %>" method="post">
                                            <label for="birthday">Enter the delivery date: &nbsp;</label>
                                            <input type="date" name="deliverydate">


                                            <input class="btn btn-primary btn-lg  mt-3" type="submit"
                                                style="background-color: #21ddff;color:#121212"
                                                value="Set Delivery date">
                                        </form>







                                        <% } %>





                                </div>
                            </div>
                        </div>



                    </div>
                </div>
            </section>
            <style>
                body {
                    color: white;
                }
            </style>






    </body>

</html>